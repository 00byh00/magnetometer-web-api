<!DOCTYPE html>
<html>
    <!--
     Date: 2021-02-11 16:44:00 
     Email: none2099@outlook.com

     This file is used to call Magnetometer web api :
     https://developer.mozilla.org/en-US/docs/Web/API/Magnetometer

     ***Only tested in chrome. 

     Problem encountered:
        Magnetometer not defined: 
            Go to chrome://flags/#enable-generic-sensor-extra-classes,
            enable Generic Sensor Extra Classes.
    -->
    <header>
        <script>
            var myHeaders = new Headers();
            myHeaders.set('Feature-Policy', 'magnetometer  *');

            let magSensor = new Magnetometer({frequency: 5}); //Chrome console shows the maximum value is 10
            console.log("Waiting for the event to happen...");

            magSensor.addEventListener('reading', e => { //Not get called 
            console.log('---');
            console.log("Magnetic field along the X-axis " + magSensor.x);
            console.log("Magnetic field along the Y-axis " + magSensor.y);
            console.log("Magnetic field along the Z-axis " + magSensor.z);
            
            document.getElementById("x_axis").innerHTML = magSensor.x;
            document.getElementById("y_axis").innerHTML = magSensor.y;
            document.getElementById("z_axis").innerHTML = magSensor.z;

            });
            magSensor.start();
        </script>
    </header>
<body>

<h2>hello</h2>
<h2 id="x_axis">x:</h2>
<h2 id="y_axis">y:</h2>
<h2 id="z_axis">z:</h2>
</body>
</html>